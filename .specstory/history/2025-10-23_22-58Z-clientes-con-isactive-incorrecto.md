<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 8995290e-1335-4d85-8e5f-68f23efd2431 (2025-10-23 22:58Z) -->

# Clientes con isActive incorrecto (2025-10-23 22:58Z)

_**User (2025-10-23 21:07Z)**_

clients esta trayendo con isActive=false. deberia ser con isactive=true. sino no muestra nada.

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is saying that clients are being fetched with `isActive=false`, but they should be fetched with `isActive=true`, otherwise nothing shows up.

Looking at the screenshot, I can see three tabs open:
- articles?page=1&limit=5&search=&isActive=true
- clients?page=1&limit=10&search=&isActive=false
- sales-orders?_rsc=1hsa2

So the issue is clear - clients are being fetched with `isActive=false` when they should be fetched with `isActive=true`.

I need to find where the clients API call is being made and fix the isActive parameter. Let me search for where clients are being fetched in the frontend code.</details></think>

---

Entiendo el problema. Los clientes se están trayendo con `isActive=false` cuando deberían ser `isActive=true`. Voy a buscar dónde se hace la llamada a la API de clientes para corregir este parámetro.

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">

</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "isActive.*false" in "frontend" • 0 matches</summary>

Output mode: content


_No matches found_

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "clients.*page=" in "frontend" • 0 matches</summary>

Output mode: content


_No matches found_

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">

</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "useClients" in "frontend" • 0 matches</summary>

Output mode: content


_No matches found_

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

Perfecto, encontré el problema. Déjame revisar el hook `useClients` y la página del dashboard de clientes:

---

Could not find file 'frontend/lib/hooks/useClients.ts' in the workspace.

---

Could not find file 'frontend/app/dashboard/clients/page.tsx' in the workspace.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: d:\dialfa new\spisa-new\frontend\lib\hooks\useClients.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: d:\dialfa new\spisa-new\frontend\app\dashboard\clients\page.tsx</summary>

</details>
</tool-use>

---

¡Encontré el problema! En la línea 16 de `clients/page.tsx`, el estado `showActiveOnly` está inicializado en `false`:

```tsx
const [showActiveOnly] = useState(false);
```

Y luego en la línea 29, ese valor `false` se pasa al hook:

```tsx
activeOnly: showActiveOnly,  // esto es false
```

Necesito cambiar ese valor inicial a `true` para que muestre solo los clientes activos. Voy a corregirlo:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: d:\dialfa new\spisa-new\frontend\app\dashboard\clients\page.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -14,5 +14,5 @@
  
  export default function ClientsPage() {
-   const [showActiveOnly] = useState(false);
+   const [showActiveOnly] = useState(true);
    const [searchTerm, setSearchTerm] = useState('');
    const [isDialogOpen, setIsDialogOpen] = useState(false);
```

</details>

</tool-use>

---

Perfecto, he corregido el problema. Cambié `showActiveOnly` de `false` a `true` en la línea 16. Ahora la página de clientes va a traer solo los clientes con `isActive=true` por defecto, lo cual es el comportamiento correcto.

El cambio fue simple pero importante:
- **Antes**: `const [showActiveOnly] = useState(false);` → traía clientes inactivos
- **Ahora**: `const [showActiveOnly] = useState(true);` → trae solo clientes activos

Esto hará que la URL sea `clients?page=1&limit=10&search=&isActive=true` en lugar de `isActive=false`, y ahora debería mostrar los clientes activos correctamente.

---

